{% extends "base.html" %} {% block title %} Main page {% endblock %} {% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/index.css') }}" />
<script src="{{ url_for('static', filename='scripts/index.js') }}" defer></script>
{% endblock %} {% block body %}
<div class="main">
    <div class="left"></div>
    <div class="middle">
        <div class="upload-form">
            <p class="upload-form-title">{{ _("Create a post") }}</p>
            <form action="/api/upload" method="post" enctype="multipart/form-data">
                <textarea name="text" id="text" placeholder="{{ _('Share your thoughts') }}" required></textarea>
                <div class="line-align">
                    <span>{{ _("Attach media") }}</span>
                    <div class="media-icons">
                        <label for="image-upload"><img
							src="{{ url_for('static', filename='assets/icons/photo_icon.svg') }}"
							class="pointer-cursor circular-highlight"
							alt="photo"
							title="{{ _('Upload an image') }}"
					/></label>
                        <input type="file" name="image-upload" id="image-upload" accept="image/*" style="display: none" />

                        <label for="video-upload"><img
							src="{{ url_for('static', filename='assets/icons/video_icon.svg') }}"
							class="pointer-cursor circular-highlight"
							alt="video"
							title="{{ _('Upload a video') }}"
					/></label>
                        <input type="file" name="video-upload" id="video-upload" accept="video/*" style="display: none" />

                        <label for="audio-upload"><img
							src="{{ url_for('static', filename='assets/icons/music_note_icon.svg') }}"
							class="pointer-cursor circular-highlight"
							alt="audio"
							title="{{ _('Upload an audio file') }}"
					/></label>
                        <input type="file" name="audio-upload" id="audio-upload" accept="audio/*" style="display: none" />
                    </div>
                </div>
                <button type="submit" id="submit-post-button">{{ _('Post') }}</button>
            </form>
        </div>
        <div class="posts">
            {% for post in posts %}
            <div class="post-frame">
                <div class="post-vote-side">
                    <p>
                        <img src="{{ url_for('static', filename='assets/icons/like_icon.svg') }}" class="pointer-cursor circular-highlight" alt="like" title="{{ _('Like this post') }}" />
                    </p>
                    <p>{{ post.likes }}</p>
                    <p>{{ post.dislikes }}</p>
                    <p>
                        <img src="{{ url_for('static', filename='assets/icons/dislike_icon.svg') }}" class="pointer-cursor circular-highlight" alt="dislike" title="{{ _('Dislike this post') }}" />
                    </p>
                </div>
                <div class="post-main">
                    <div class="post-info">
                        <div class="post-user-profile pointer-cursor" alt="{{ user.first_name }}'s profile">
                            {% if user.profile_picture %} {% set profile_picture_path = "uploads/"+user.id_+"/"+user.profile_picture %}
                            <img src="{{ url_for('static', filename=profile_picture_path) }}" alt="profile picture" /> {% else %}
                            <img src="{{ url_for('static', filename='assets/images/default_profile_picture.png') }}" /> {% endif %}
                            <p>{{ user.first_name }} {{ user.middle_name or "" }} {{ user.last_name }}</p>
                        </div>
                        <p>at {{ post.create_time }}</p>
                    </div>
                    <p>{{ post.text }}</p>
                    {% if post.image %} {% set image_path = "uploads/"+ user.id_+"/"+post.image %}
                    <img src="{{ url_for('static', filename=image_path) }}" class="pointer-cursor user-image-upload" alt="upload" /> {% endif %} {% if post.video %} {% set video_path = "uploads/"+ user.id_+"/"+post.video %}
                    <video controls class="pointer-cursor user-video-upload">
					<source src="{{ url_for('static', filename=video_path) }}" type="video/mp4" />
				</video> {% endif %} {% if post.audio %} {% set audio_path = "uploads/"+ user.id_+"/"+post.audio %}
                    <audio controls><source src="{{ url_for('static', filename=audio_path) }}" type="audio/mp3" /></audio> {% endif %}

                    <div class="post-extra">
                        <img src="{{ url_for('static', filename='assets/icons/comment_icon.svg') }}" class="pointer-cursor circular-highlight" alt="comment" title="{{ _('Comment on this post') }}" />
                        <img src="{{ url_for('static', filename='assets/icons/share_icon.svg') }}" class="pointer-cursor circular-highlight" alt="share" title="{{ _('Share this post') }}" />
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="right"></div>
</div>
{% endblock %}